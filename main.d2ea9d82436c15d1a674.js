!function(e){function t(t){for(var r,o,i=t[0],l=t[1],s=t[2],f=0,d=[];f<i.length;f++)o=i[f],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&d.push(a[o][0]),a[o]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);for(u&&u(t);d.length;)d.shift()();return c.push.apply(c,s||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],r=!0,i=1;i<n.length;i++){var l=n[i];0!==a[l]&&(r=!1)}r&&(c.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},a={0:0},c=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var i=window.webpackJsonp=window.webpackJsonp||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var s=0;s<i.length;s++)t(i[s]);var u=l;c.push([124,1]),n()}({124:function(e,t,n){n(125),e.exports=n(316)},315:function(e,t,n){},316:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(123),o=n.n(c),i=(n(315),function(e){var t=e.click,n=e.title,r=void 0===n?"":n,c=e.disabled,o=void 0!==c&&c,i=e.children;return a.a.createElement("button",{onClick:t,title:r,className:"command-bar__btn",disabled:o},i)}),l=function(e){var t=e.click,n=e.title,r=void 0===n?"":n,c=e.disabled,o=void 0!==c&&c,i=e.children;return a.a.createElement("button",{onClick:t,title:r,className:"command-bar__btn",disabled:o},i)},s=function(){return a.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"48",viewBox:"0 0 48 48",width:"48",className:"command-bar__btn__icon"},a.a.createElement("path",{d:"M0 0h48v48h-48z",fill:"none"}),a.a.createElement("path",{d:"M38 4h-8.37c-.82-2.32-3.02-4-5.63-4s-4.81 1.68-5.63 4h-8.37c-2.21 0-4 1.79-4 4v32c0 2.21 1.79 4 4 4h28c2.21 0 4-1.79 4-4v-32c0-2.21-1.79-4-4-4zm-14 0c1.1 0 2 .89 2 2s-.9 2-2 2-2-.89-2-2 .9-2 2-2zm14 36h-28v-32h4v6h20v-6h4v32z"}))},u=function(){return a.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"48",viewBox:"0 0 48 48",width:"48",className:"command-bar__btn__icon"},a.a.createElement("path",{d:"M0 0h48v48h-48z",fill:"none"}),a.a.createElement("path",{d:"M38 12.83l-2.83-2.83-11.17 11.17-11.17-11.17-2.83 2.83 11.17 11.17-11.17 11.17 2.83 2.83 11.17-11.17 11.17 11.17 2.83-2.83-11.17-11.17z"}))},f=function(){return a.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",className:"command-bar__btn__icon"},a.a.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"}),a.a.createElement("path",{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"}))},d=function(e){var t=e.click,n=e.title,r=void 0===n?"":n,c=e.active,o=void 0!==c&&c,i=e.children,l="command-bar__btn";return o&&(l+=" command-bar__btn--active"),a.a.createElement("button",{onClick:t,title:r,className:l},a.a.createElement("div",{className:"command-bar__circle"},a.a.createElement("div",{className:"command-bar__circle-inner"},a.a.createElement("span",{className:"hidden"},i))))},m=function(e){var t="mode switch\n\n  Applying formatting\n\n  - all text [Alt+K] ".concat(e.allText?"(current mode)":"","\n  or\n  - selected text [Alt+L] ").concat(e.allText?"":"(current mode)");return a.a.createElement("div",{className:"command-bar"},a.a.createElement("div",{className:"command-bar__panel"},a.a.createElement(i,{click:function(){return e.action(10)},title:"Bold [Alt+B]"},"B"),a.a.createElement(i,{click:function(){return e.action(11)},title:"Italic [Alt+I]"},"I"),a.a.createElement(i,{click:function(){return e.action(12)},title:"Strikethrough [Alt+S]"},"S"),a.a.createElement(i,{click:function(){return e.action(13)},title:"Underline [Alt+U]"},"U"),a.a.createElement(i,{click:function(){return e.action(14)},title:"Spoiler [Alt+P]"},"■"),a.a.createElement(i,{click:function(){return e.action(20)},title:"Uppercase [Alt+↑]"},"AA"),a.a.createElement(i,{click:function(){return e.action(21)},title:"Lowercase [Alt+↓]"},"aa"),a.a.createElement(i,{click:function(){return e.action(30)},title:"@ list [Alt+J]"},"@"),a.a.createElement(i,{click:function(){return e.action(40)},title:"format as filename [Alt+N]"},"&f")),a.a.createElement("div",{className:"command-bar__panel"},a.a.createElement(l,{click:e.clipboard,title:"Add to clipboard [Alt+Q]"},a.a.createElement(s,null)),a.a.createElement(l,{click:e.discard,title:"Undo all [Alt+X]",disabled:!e.showRollback},a.a.createElement(u,null)),a.a.createElement(l,{click:e.undo,title:"Undo [Alt+Z]",disabled:!e.showRollback},a.a.createElement(f,null)),a.a.createElement(d,{click:e.switchMode,title:t,active:e.allText},"mode")))},h=function(e){var t=e.message;return t?a.a.createElement("span",{className:"editor__message",title:t},t):null};function b(e){for(var t={"[B]":'<span class="bbcode-bold">',"[/B]":"</span>","[I]":'<span class="bbcode-italic">',"[/I]":"</span>","[S]":'<span class="bbcode-strike">',"[/S]":"</span>","[SPOILER]":'<span class="bbcode-spoiler">',"[/SPOILER]":"</span>","[U]":'<span class="bbcode-underline">',"[/U]":"</span>"},n=!1,r="",a="",c="",o=0;o<e.length;o++){if("["===(c=e[o])&&(n=!0),n)r+=c.toUpperCase();else switch(c){case"\n":a+="<br />";break;case" ":a+="&nbsp";break;default:a+=c}"]"===c&&(n=!1,t[r]&&(a+=t[r]),r="")}return a}function p(e){return e.replaceAll(/[^-_().,a-zA-Z0-9 ]/g,"").replaceAll(/ {2,}/g," ")}function v(e,t){if(t.indexOf("\n")>=0){var n=t.split("\n");return n.forEach((function(t,r){n[r]=t.trim().length?"[".concat(e,"]").concat(t,"[/").concat(e,"]"):t})),n.join("\n")}return"[".concat(e,"]").concat(t,"[/").concat(e,"]")}function y(e,t){return e?t.toUpperCase():t.toLowerCase()}function g(e,t){return t.replaceAll(/\n/g,"\n".concat(e,"\n"))}var E=function(e){var t="Total number of characters",n="Number of characters without any spaces",r="Number of selected characters";return a.a.createElement("div",{className:"status-bar"},a.a.createElement("span",{className:"editor__counter",title:t},e.text.length),a.a.createElement("span",{className:"editor__counter",title:n},function(e){if(e){var t=e.match(/\s/g);return t?e.length-t.length:e.length}return 0}(e.text)),a.a.createElement("span",{className:"editor__counter",title:r,ref:e.editorCSCRef},"0"),a.a.createElement(h,{message:e.message}))},w=function(e){return a.a.createElement("textarea",{ref:e.editorRef,value:e.text,className:"editor__textarea",onChange:e.onEditorChange,onKeyDown:e.onEditorKeyDown,onSelect:e.onEditorTextSelect})},x=function(e){var t=e.text;return a.a.createElement("div",{className:"preview",dangerouslySetInnerHTML:{__html:b(t)}})};function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O(e);if(t){var a=O(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return A(this,n)}}function A(e,t){return!t||"object"!==k(t)&&"function"!=typeof t?C(e):t}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(o,e);var t,n,r,c=T(o);function o(){var e;_(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return N(C(e=c.call.apply(c,[this].concat(n))),"state",{text:"",allText:!1,message:""}),N(C(e),"editorHistory",[]),N(C(e),"editorRef",a.a.createRef()),N(C(e),"editorCSCRef",a.a.createRef()),N(C(e),"action",(function(t){var n,r,a=e.getText();switch(t){case 10:n=v("B",a),r=3;break;case 11:n=v("I",a),r=3;break;case 12:n=v("S",a),r=3;break;case 13:n=v("U",a),r=3;break;case 14:n=v("SPOILER",a),r=9;break;case 20:n=y(1,a);break;case 21:n=y(0,a);break;case 30:n=g("@",a);break;case 40:n=p(a);break;default:console.log("[APP] command not found")}a!==n&&(e.editorHistory.push(e.state.text),e.setText(n,r)),e.editorRef.current.focus()})),N(C(e),"discard",(function(){var t=e.editorHistory[0];void 0!==t&&(e.editorHistory=[],e.setState({text:t})),e.editorRef.current.focus()})),N(C(e),"undo",(function(){var t=e.editorHistory.pop();void 0!==t&&e.setState({text:t}),e.editorRef.current.focus()})),N(C(e),"clipboard",(function(){if(!navigator.clipboard||!e.state.text.length)return e.editorRef.current.focus();e.editorRef.current.selectionStart=e.state.text.length,e.editorRef.current.selectionEnd=e.state.text.length,navigator.clipboard.writeText(e.state.text).then((function(){return e.setState({message:"✓ Copied to clipboard"}),new Promise((function(e){setTimeout((function(){return e()}),2e3)}))})).then((function(){e.setState({message:""})})).catch((function(){return e.setState({message:"Browser buffer error. Repeat the action!"}),new Promise((function(e){setTimeout((function(){return e()}),2e3)}))})).then((function(){e.setState({message:""})})),e.editorRef.current.blur()})),N(C(e),"switchMode",(function(t){e.editorRef.current.focus(),"boolean"==typeof t?t!==e.state.allText&&e.setState({allText:t}):e.setState({allText:!e.state.allText})})),N(C(e),"onEditorChange",(function(t){e.setState({text:t.target.value})})),N(C(e),"onEditorTextSelect",(function(t){var n=t.target.selectionStart,r=t.target.selectionEnd,a=n!==r?r-n:0;e.editorCSCRef.current.textContent=a})),N(C(e),"onEditorKeyDown",(function(t){if(t.altKey)switch(t.code){case"KeyB":e.action(10);break;case"KeyI":e.action(11);break;case"KeyS":e.action(12);break;case"KeyU":e.action(13);break;case"KeyP":e.action(14);break;case"ArrowUp":e.action(20);break;case"ArrowDown":e.action(21);break;case"KeyJ":e.action(30);break;case"KeyN":e.action(40);break;case"KeyZ":e.undo();break;case"KeyX":e.discard();break;case"KeyQ":e.clipboard();break;case"KeyK":e.switchMode(!0);break;case"KeyL":e.switchMode(!1);break;default:return}})),e}return t=o,(n=[{key:"getText",value:function(){if(this.state.allText)return this.state.text;var e=this.editorRef.current.selectionStart,t=this.editorRef.current.selectionEnd;return e===t?"":this.editorRef.current.value.substring(e,t)}},{key:"setText",value:function(e,t){if(this.state.allText)this.setState({text:e});else{var n=this.editorRef.current.selectionStart,r=this.editorRef.current.selectionEnd;this.editorRef.current.setRangeText(e,n,r,"end"),t&&n===r&&(this.editorRef.current.selectionStart=n+t,this.editorRef.current.selectionEnd=n+t),this.setState({text:this.editorRef.current.value})}}},{key:"render",value:function(){return a.a.createElement("main",{className:"main"},a.a.createElement(m,{allText:this.state.allText,showRollback:this.editorHistory.length>0,undo:this.undo,action:this.action,discard:this.discard,clipboard:this.clipboard,switchMode:this.switchMode}),a.a.createElement("div",{className:"editor"},a.a.createElement(E,{text:this.state.text,message:this.state.message,editorCSCRef:this.editorCSCRef}),a.a.createElement(w,{editorRef:this.editorRef,text:this.state.text,onEditorChange:this.onEditorChange,onEditorKeyDown:this.onEditorKeyDown,onEditorTextSelect:this.onEditorTextSelect})),a.a.createElement(x,{text:this.state.text}))}}])&&S(t.prototype,n),r&&S(t,r),o}(r.Component);o.a.render(a.a.createElement(P,null),document.getElementById("root"))}});